@startuml uc5
left to right direction

title Управление пользовательским профилем

actor "Пользователь" as User
actor "Гость" as Guest
actor "Система аутентификации" as AuthSystem

rectangle "Регистрация и аутентификация" {
  usecase "Регистрация нового пользователя" as UC1
  usecase "Вход в систему" as UC2
  usecase "Восстановление пароля" as UC3
  usecase "Выход из системы" as UC4
  usecase "Аутентификация через соцсети" as UC5
  usecase "Подтверждение email/телефона" as UC6
  
  UC1 -.> UC6 : include
  UC2 -.> UC1 : extend
  UC3 -.> UC2 : extend
  UC5 -.> UC1 : extend
}

rectangle "Управление профилем" {
  usecase "Просмотр профиля" as UC7
  usecase "Редактирование личных данных" as UC8
  usecase "Изменение пароля" as UC9
  usecase "Привязка платежных методов" as UC12
  usecase "Удаление аккаунта" as UC13
  
  UC7 -.> UC8 : include
  UC9 -.> UC8 : extend
  UC12 -.> UC7 : extend
  UC13 -.> UC4 : include
}

rectangle "История и активность" {
  usecase "Просмотр истории покупок" as UC14
  usecase "Просмотр избранных мероприятий" as UC15
  usecase "Просмотр оставленных отзывов" as UC16
  
  UC14 --.> UC7 : include
  UC15 --.> UC7 : include
  UC16 --.> UC7 : include
}

User --> UC4
User --> UC7
User --> UC8
User --> UC13
User --> UC14
User --> UC15
User --> UC16
Guest --> UC1
Guest --> UC2
AuthSystem --> UC2
AuthSystem --> UC3
AuthSystem --> UC5

@enduml